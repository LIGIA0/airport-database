-- Generated by Oracle SQL Developer Data Modeler 22.2.0.165.1149
--   at:        2022-08-18 23:07:25 EEST
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE airlines (
    airline_id          VARCHAR2(3) NOT NULL,
    airline_name        VARCHAR2(35) NOT NULL,
    airline_type        VARCHAR2(12) NOT NULL,
    routes_route_id     VARCHAR2(10) NOT NULL,
    routes_airport_code CHAR(3) NOT NULL,
    routes_location_id  NUMBER(4) NOT NULL
);

ALTER TABLE airlines
    ADD CONSTRAINT airlines_pk PRIMARY KEY ( airline_id,
                                             routes_route_id,
                                             routes_airport_code,
                                             routes_location_id );

CREATE TABLE airplanes (
    airplane_id                  VARCHAR2(3) NOT NULL,
    manufacturer                 VARCHAR2(20) NOT NULL,
    model_number                 VARCHAR2(3) NOT NULL,
    airlines_airline_id          VARCHAR2(3) NOT NULL,
    airlines_routes_route_id     VARCHAR2(10) NOT NULL,
    airlines_routes_airport_code CHAR(3) NOT NULL,
    airlines_routes_location_id  NUMBER(4) NOT NULL
);

ALTER TABLE airplanes
    ADD CONSTRAINT airplanes_pk PRIMARY KEY ( airplane_id,
                                              airlines_airline_id,
                                              airlines_routes_route_id,
                                              airlines_routes_airport_code,
                                              airlines_routes_location_id );

CREATE TABLE airports (
    airport_code          CHAR(3) NOT NULL,
    airport_name          VARCHAR2(40) NOT NULL,
    airport_contact       VARCHAR2(20) NOT NULL,
    locations_location_id NUMBER(4) NOT NULL
);

ALTER TABLE airports ADD CONSTRAINT airports_pk PRIMARY KEY ( airport_code,
                                                              locations_location_id );

CREATE TABLE boarding_passes (
    boardingpass_code       VARCHAR2(15) NOT NULL,
    gate                    VARCHAR2(7) NOT NULL,
    class                   VARCHAR2(15) NOT NULL,
    seat_number             VARCHAR2(5) NOT NULL,
    boarding_time           DATE NOT NULL,
    luggage                 VARCHAR2(4) NOT NULL,
    flights_flight_id       VARCHAR2(10) NOT NULL,
    passengers_passenger_id NUMBER(6) NOT NULL,
    flights_airplane_id     VARCHAR2(3) NOT NULL,
    flights_airline_id      VARCHAR2(3) NOT NULL,
    flights_route_id        VARCHAR2(10) NOT NULL,
    flights_airport_code    CHAR(3) NOT NULL,
    flights_location_id     NUMBER(4) NOT NULL
);

ALTER TABLE boarding_passes
    ADD CONSTRAINT boarding_passes_pk PRIMARY KEY ( boardingpass_code,
                                                    flights_flight_id,
                                                    flights_airplane_id,
                                                    flights_airline_id,
                                                    flights_route_id,
                                                    flights_airport_code,
                                                    flights_location_id,
                                                    passengers_passenger_id );

CREATE TABLE cabin_crews (
    cabin_id    VARCHAR2(10) NOT NULL,
    first_name  VARCHAR2(25) NOT NULL,
    last_name   VARCHAR2(25) NOT NULL,
    designation VARCHAR2(20) NOT NULL,
    experience  INTEGER NOT NULL
);

ALTER TABLE cabin_crews ADD CONSTRAINT cabin_crews_pk PRIMARY KEY ( cabin_id );

CREATE TABLE countries (
    country_id        CHAR(2) NOT NULL,
    country_name      VARCHAR2(40) NOT NULL,
    regions_region_id NUMBER(1) NOT NULL
);

ALTER TABLE countries ADD CONSTRAINT countries_pk PRIMARY KEY ( country_id );

CREATE TABLE flight_cabincrew (
    flights_flight_id    VARCHAR2(10) NOT NULL,
    cabin_crews_cabin_id VARCHAR2(10) NOT NULL,
    flights_airplane_id  VARCHAR2(3) NOT NULL,
    flights_airline_id   VARCHAR2(3) NOT NULL,
    flights_route_id     VARCHAR2(10) NOT NULL,
    flights_airport_code CHAR(3) NOT NULL,
    flights_location_id  NUMBER(4) NOT NULL
);

ALTER TABLE flight_cabincrew
    ADD CONSTRAINT flight_cabincrew_pk PRIMARY KEY ( flights_flight_id,
                                                     flights_airplane_id,
                                                     flights_airline_id,
                                                     flights_route_id,
                                                     flights_airport_code,
                                                     flights_location_id,
                                                     cabin_crews_cabin_id );

CREATE TABLE flight_pilot (
    flights_flight_id    VARCHAR2(10) NOT NULL,
    pilots_pilot_id      VARCHAR2(10) NOT NULL,
    flights_airplane_id  VARCHAR2(3) NOT NULL,
    flights_airline_id   VARCHAR2(3) NOT NULL,
    flights_route_id     VARCHAR2(10) NOT NULL,
    flights_airport_code CHAR(3) NOT NULL,
    flights_location_id  NUMBER(4) NOT NULL
);

ALTER TABLE flight_pilot
    ADD CONSTRAINT flight_pilot_pk PRIMARY KEY ( flights_flight_id,
                                                 flights_airplane_id,
                                                 flights_airline_id,
                                                 flights_route_id,
                                                 flights_airport_code,
                                                 flights_location_id,
                                                 pilots_pilot_id );

CREATE TABLE flights (
    flight_id                              VARCHAR2(10) NOT NULL,
    starting_point                         VARCHAR2(3) NOT NULL,
    final_destination                      VARCHAR2(3) NOT NULL,
    departure_time                         DATE NOT NULL,
    arrival_time                           DATE NOT NULL,
    status                                 VARCHAR2(10) NOT NULL,
    duration                               VARCHAR2(20) NOT NULL,
    layover                                VARCHAR2(20) NOT NULL,
    no_stops                               INTEGER NOT NULL,
    airplanes_airplane_id                  VARCHAR2(3) NOT NULL,
    airplanes_airlines_airline_id          VARCHAR2(3) NOT NULL, 
--  ERROR: Column name length exceeds maximum allowed length(30) 
    airplanes_airlines_routes_route_id     VARCHAR2(10) NOT NULL, 
--  ERROR: Column name length exceeds maximum allowed length(30) 
    airplanes_airlines_routes_airport_code CHAR(3) NOT NULL, 
--  ERROR: Column name length exceeds maximum allowed length(30) 
    airplanes_airlines_routes_location_id  NUMBER(4) NOT NULL
);

ALTER TABLE flights
    ADD CONSTRAINT flights_pk PRIMARY KEY ( flight_id,
                                            airplanes_airplane_id,
                                            airplanes_airlines_airline_id,
                                            airplanes_airlines_routes_route_id,
                                            airplanes_airlines_routes_airport_code,
                                            airplanes_airlines_routes_location_id );

CREATE TABLE jobtypes (
    job_id     VARCHAR2(10) NOT NULL,
    job_name   VARCHAR2(30),
    shift      VARCHAR2(10) NOT NULL,
    start_date DATE NOT NULL,
    min_salary NUMBER(6) NOT NULL,
    max_salary NUMBER(6)
);

ALTER TABLE jobtypes ADD CONSTRAINT jobtypes_pk PRIMARY KEY ( job_id );

CREATE TABLE locations (
    location_id          NUMBER(4) NOT NULL,
    adress               VARCHAR2(40) NOT NULL,
    postal_code          VARCHAR2(12) NOT NULL,
    city                 VARCHAR2(30) NOT NULL,
    state                VARCHAR2(30) NOT NULL,
    countries_country_id CHAR(2) NOT NULL
);

ALTER TABLE locations ADD CONSTRAINT locations_pk PRIMARY KEY ( location_id );

CREATE TABLE passengers (
    passenger_id    NUMBER(6) NOT NULL,
    first_name      VARCHAR2(25) NOT NULL,
    last_name       VARCHAR2(25) NOT NULL,
    adress          VARCHAR2(40) NOT NULL,
    email           VARCHAR2(30) NOT NULL,
    phone           VARCHAR2(20) NOT NULL,
    age             INTEGER NOT NULL,
    sex             CHAR(1) NOT NULL,
    passport_number VARCHAR2(10) NOT NULL
);

ALTER TABLE passengers ADD CONSTRAINT passengers_pk PRIMARY KEY ( passenger_id );

CREATE TABLE payment_details (
    payment_code            VARCHAR2(8) NOT NULL,
    amount                  INTEGER NOT NULL,
    payment_date            DATE NOT NULL,
    passengers_passenger_id NUMBER(6) NOT NULL
);

ALTER TABLE payment_details ADD CONSTRAINT payment_details_pk PRIMARY KEY ( payment_code,
                                                                            passengers_passenger_id );

CREATE TABLE payment_methods (
    pay_id                                  VARCHAR2(8) NOT NULL,
    pay_method                              VARCHAR2(20) NOT NULL,
    pay_status                              VARCHAR2(15) NOT NULL,
    payment_details_payment_code            VARCHAR2(8) NOT NULL, 
--  ERROR: Column name length exceeds maximum allowed length(30) 
    payment_details_passengers_passenger_id NUMBER(6) NOT NULL
);

ALTER TABLE payment_methods
    ADD CONSTRAINT payment_methods_pk PRIMARY KEY ( pay_id,
                                                    payment_details_payment_code,
                                                    payment_details_passengers_passenger_id );

CREATE TABLE pilots (
    pilot_id    VARCHAR2(10) NOT NULL,
    first_name  VARCHAR2(25) NOT NULL,
    last_name   VARCHAR2(25) NOT NULL,
    license     VARCHAR2(20) NOT NULL,
    designation VARCHAR2(25) NOT NULL
);

ALTER TABLE pilots ADD CONSTRAINT pilots_pk PRIMARY KEY ( pilot_id );

CREATE TABLE regions (
    region_id   NUMBER(1) NOT NULL,
    region_name VARCHAR2(25) NOT NULL
);

ALTER TABLE regions ADD CONSTRAINT regions_pk PRIMARY KEY ( region_id );

CREATE TABLE routes (
    route_id                       VARCHAR2(10) NOT NULL,
    departure_airport              VARCHAR2(40) NOT NULL,
    arrival_airport                VARCHAR2(40) NOT NULL,
    airports_airport_code          CHAR(3) NOT NULL,
    airports_locations_location_id NUMBER(4) NOT NULL
);

ALTER TABLE routes
    ADD CONSTRAINT routes_pk PRIMARY KEY ( route_id,
                                           airports_airport_code,
                                           airports_locations_location_id );

CREATE TABLE staff (
    staff_id                             NUMBER(6) NOT NULL,
    first_name                           VARCHAR2(25) NOT NULL,
    last_name                            VARCHAR2(25) NOT NULL,
    email                                VARCHAR2(30) NOT NULL,
    phone_number                         VARCHAR2(20) NOT NULL,
    employement_date                     DATE NOT NULL,
    salary                               NUMBER(8, 2) NOT NULL,
    commission                           NUMBER(2, 2) NOT NULL,
    jobtypes_job_id                      VARCHAR2(10) NOT NULL,
    airports_airport_code                CHAR(3) NOT NULL,
    airports_locations_location_id       NUMBER(4) NOT NULL,
    staff_staff_id                       NUMBER(6) NOT NULL,
    staff_jobtypes_job_id                VARCHAR2(10) NOT NULL,
    staff_airports_airport_code          CHAR(3) NOT NULL, 
--  ERROR: Column name length exceeds maximum allowed length(30) 
    staff_airports_locations_location_id NUMBER(4) NOT NULL
);

ALTER TABLE staff
    ADD CONSTRAINT staff_pk PRIMARY KEY ( staff_id,
                                          jobtypes_job_id,
                                          airports_airport_code,
                                          airports_locations_location_id );

CREATE TABLE tickets (
    ticket_id               VARCHAR2(15) NOT NULL,
    source                  VARCHAR2(3) NOT NULL,
    destination             VARCHAR2(3) NOT NULL,
    departure_time          DATE NOT NULL,
    price                   INTEGER NOT NULL,
    booking_date            DATE NOT NULL,
    travel_date             DATE NOT NULL,
    cancellation_date       DATE NOT NULL,
    passengers_passenger_id NUMBER(6) NOT NULL
);

ALTER TABLE tickets ADD CONSTRAINT tickets_pk PRIMARY KEY ( ticket_id,
                                                            passengers_passenger_id );

ALTER TABLE airlines
    ADD CONSTRAINT airlines_routes_fk FOREIGN KEY ( routes_route_id,
                                                    routes_airport_code,
                                                    routes_location_id )
        REFERENCES routes ( route_id,
                            airports_airport_code,
                            airports_locations_location_id );

ALTER TABLE airplanes
    ADD CONSTRAINT airplanes_airlines_fk FOREIGN KEY ( airlines_airline_id,
                                                       airlines_routes_route_id,
                                                       airlines_routes_airport_code,
                                                       airlines_routes_location_id )
        REFERENCES airlines ( airline_id,
                              routes_route_id,
                              routes_airport_code,
                              routes_location_id );

ALTER TABLE airports
    ADD CONSTRAINT airports_locations_fk FOREIGN KEY ( locations_location_id )
        REFERENCES locations ( location_id );

ALTER TABLE boarding_passes
    ADD CONSTRAINT boarding_passes_flights_fk FOREIGN KEY ( flights_flight_id,
                                                            flights_airplane_id,
                                                            flights_airline_id,
                                                            flights_route_id,
                                                            flights_airport_code,
                                                            flights_location_id )
        REFERENCES flights ( flight_id,
                             airplanes_airplane_id,
                             airplanes_airlines_airline_id,
                             airplanes_airlines_routes_route_id,
                             airplanes_airlines_routes_airport_code,
                             airplanes_airlines_routes_location_id );

ALTER TABLE boarding_passes
    ADD CONSTRAINT boarding_passes_passengers_fk FOREIGN KEY ( passengers_passenger_id )
        REFERENCES passengers ( passenger_id );

ALTER TABLE countries
    ADD CONSTRAINT countries_regions_fk FOREIGN KEY ( regions_region_id )
        REFERENCES regions ( region_id );

--  ERROR: FK name length exceeds maximum allowed length(30) 
ALTER TABLE flight_cabincrew
    ADD CONSTRAINT flight_cabincrew_cabin_crews_fk FOREIGN KEY ( cabin_crews_cabin_id )
        REFERENCES cabin_crews ( cabin_id );

ALTER TABLE flight_cabincrew
    ADD CONSTRAINT flight_cabincrew_flights_fk FOREIGN KEY ( flights_flight_id,
                                                             flights_airplane_id,
                                                             flights_airline_id,
                                                             flights_route_id,
                                                             flights_airport_code,
                                                             flights_location_id )
        REFERENCES flights ( flight_id,
                             airplanes_airplane_id,
                             airplanes_airlines_airline_id,
                             airplanes_airlines_routes_route_id,
                             airplanes_airlines_routes_airport_code,
                             airplanes_airlines_routes_location_id );

ALTER TABLE flight_pilot
    ADD CONSTRAINT flight_pilot_flights_fk FOREIGN KEY ( flights_flight_id,
                                                         flights_airplane_id,
                                                         flights_airline_id,
                                                         flights_route_id,
                                                         flights_airport_code,
                                                         flights_location_id )
        REFERENCES flights ( flight_id,
                             airplanes_airplane_id,
                             airplanes_airlines_airline_id,
                             airplanes_airlines_routes_route_id,
                             airplanes_airlines_routes_airport_code,
                             airplanes_airlines_routes_location_id );

ALTER TABLE flight_pilot
    ADD CONSTRAINT flight_pilot_pilots_fk FOREIGN KEY ( pilots_pilot_id )
        REFERENCES pilots ( pilot_id );

ALTER TABLE flights
    ADD CONSTRAINT flights_airplanes_fk FOREIGN KEY ( airplanes_airplane_id,
                                                      airplanes_airlines_airline_id,
                                                      airplanes_airlines_routes_route_id,
                                                      airplanes_airlines_routes_airport_code,
                                                      airplanes_airlines_routes_location_id )
        REFERENCES airplanes ( airplane_id,
                               airlines_airline_id,
                               airlines_routes_route_id,
                               airlines_routes_airport_code,
                               airlines_routes_location_id );

ALTER TABLE locations
    ADD CONSTRAINT locations_countries_fk FOREIGN KEY ( countries_country_id )
        REFERENCES countries ( country_id );

ALTER TABLE payment_details
    ADD CONSTRAINT payment_details_passengers_fk FOREIGN KEY ( passengers_passenger_id )
        REFERENCES passengers ( passenger_id );

--  ERROR: FK name length exceeds maximum allowed length(30) 
ALTER TABLE payment_methods
    ADD CONSTRAINT payment_methods_payment_details_fk FOREIGN KEY ( payment_details_payment_code,
                                                                    payment_details_passengers_passenger_id )
        REFERENCES payment_details ( payment_code,
                                     passengers_passenger_id );

ALTER TABLE routes
    ADD CONSTRAINT routes_airports_fk FOREIGN KEY ( airports_airport_code,
                                                    airports_locations_location_id )
        REFERENCES airports ( airport_code,
                              locations_location_id );

ALTER TABLE staff
    ADD CONSTRAINT staff_airports_fk FOREIGN KEY ( airports_airport_code,
                                                   airports_locations_location_id )
        REFERENCES airports ( airport_code,
                              locations_location_id );

ALTER TABLE staff
    ADD CONSTRAINT staff_jobtypes_fk FOREIGN KEY ( jobtypes_job_id )
        REFERENCES jobtypes ( job_id );

ALTER TABLE staff
    ADD CONSTRAINT staff_staff_fk FOREIGN KEY ( staff_staff_id,
                                                staff_jobtypes_job_id,
                                                staff_airports_airport_code,
                                                staff_airports_locations_location_id )
        REFERENCES staff ( staff_id,
                           jobtypes_job_id,
                           airports_airport_code,
                           airports_locations_location_id );

ALTER TABLE tickets
    ADD CONSTRAINT tickets_passengers_fk FOREIGN KEY ( passengers_passenger_id )
        REFERENCES passengers ( passenger_id );



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            19
-- CREATE INDEX                             0
-- ALTER TABLE                             38
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   7
-- WARNINGS                                 0
